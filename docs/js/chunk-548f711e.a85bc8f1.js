(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-548f711e"],{b51f:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("basePage",{attrs:{title:"帮你选"}},[t._l(t.text_arr,function(e,r){return a("div",{key:r,staticClass:"input-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text_arr[r],expression:"text_arr[key]"}],attrs:{type:"text",placeholder:"请输入选项"},domProps:{value:t.text_arr[r]},on:{input:function(e){e.target.composing||t.$set(t.text_arr,r,e.target.value)}}}),a("i",{staticClass:"cubeic-close mg-l10",on:{click:function(e){return t.removeOption(r)}}})])}),a("cube-button",{staticClass:"mg-t20",attrs:{primary:!0},on:{click:function(e){return t.addOption()}}},[t._v("新增选项")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTurntable,expression:"showTurntable"}],staticClass:"wrapper"},[a("div",{staticClass:"choose-btn",on:{click:function(e){return t.rotate()}}},[a("div",{staticClass:"wheel-pointer"},[a("i")]),a("div",{staticClass:"wheel-btn"},[a("a",{attrs:{href:"javascript:;"}},[a("strong",[t._v("帮你选")])])])]),a("canvas",{attrs:{id:"canvas_circle",width:"300",height:"300"}}),a("div",[t._v("\n      结果：\n      "),a("span",{staticClass:"resultTxt"},[t._v(t._s(t.result))])])]),a("cube-button",{staticClass:"mg-t20",attrs:{primary:!0},on:{click:function(e){return t.createdTurntable()}}},[t._v("生成转盘")])],2)},i=[],n=a("0649"),s=a.n(n),l=(a("18b2"),a("7486")),c={data:function(){return{showTurntable:!1,angle:0,isStatr:!1,text_arr:["选项1","选项2","选项3"],result:""}},computed:{oAngle:function(){return 360/this.text_arr.length}},methods:{removeOption:function(t){this.text_arr.splice(t,1)},addOption:function(){this.text_arr.push("选项")},createdTurntable:function(){var t;if(1!==this.text_arr.length){2===this.text_arr.length&&(t=this.text_arr).push.apply(t,Object(l["a"])(this.text_arr));var e=document.getElementById("canvas_circle");e.getContext("2d");e.height=e.height,this.drawCircle("canvas_circle",this.text_arr),this.drawText("canvas_circle",this.text_arr),this.showTurntable=!0,this.$util.setLocalStorage("select_arr",this.text_arr)}else this.$createToast({txt:"请输入至少两个选项",type:"txt"}).show()},drawCircle:function(t,e){var a=document.getElementById(t),r=a.getContext("2d"),i=.5*a.width-20,n=1/e.length,s=1.5*Math.PI,l=1.5*Math.PI;r.translate(.5*a.width,.5*a.width);for(var c=0;c<e.length;c++)l+=n*Math.PI*2,r.fillStyle="#fff",r.beginPath(),r.moveTo(0,0),r.arc(0,0,i,s,l,!1),r.closePath(),r.fill(),r.lineWidth=1,r.stroke(),s=l},drawText:function(t,e){for(var a=document.getElementById(t),r=a.getContext("2d"),i=1/e.length,n=.5*a.width-20,s=0,l=0,c=0,o=-n,h=0,u=0,d=1.5*Math.PI,v=0;v<e.length;v++)d+=i*Math.PI*2,h=n*Math.cos(d),u=n*Math.sin(d),s=(c+h)/2,l=(o+u)/2,r.font="bold 16px 微软雅黑",r.fillStyle="#000",r.textAlign="center",r.textBaseline="middle",r.fillText(e[v],s,l),c=h,o=u},rotate:function(){var t=this;if(!this.isStatr){this.isStatr=!0;var e=s()(3600*(Math.random()+1));e%this.oAngle===0&&(e+=5);var a=(this.angle+e)%360,r=this.text_arr.length-Math.ceil(a/this.oAngle);document.getElementById("canvas_circle").style.transform="rotate("+(this.angle+e)+"deg)",setTimeout(function(){t.angle+=e,t.isStatr=!1,t.result=t.text_arr[r]},3050)}}},destroyed:function(){this.$util.setLocalStorage("select_arr",this.text_arr)},created:function(){var t=this.$util.getLocalStorage("select_arr");t&&(this.text_arr=t)}},o=c,h=(a("d3ad"),a("fc05")),u=Object(h["a"])(o,r,i,!1,null,"a2e5d772",null);e["default"]=u.exports},d3ad:function(t,e,a){"use strict";var r=a("ee3b"),i=a.n(r);i.a},ee3b:function(t,e,a){}}]);